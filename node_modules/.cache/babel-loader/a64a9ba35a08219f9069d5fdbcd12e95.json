{"ast":null,"code":"import _toConsumableArray from\"/Users/dilrubareyyan/Documents/Files/School/SEBA/laundrywise/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/dilrubareyyan/Documents/Files/School/SEBA/laundrywise/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dilrubareyyan/Documents/Files/School/SEBA/laundrywise/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/dilrubareyyan/Documents/Files/School/SEBA/laundrywise/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/dilrubareyyan/Documents/Files/School/SEBA/laundrywise/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import{Button,Grid}from\"@material-ui/core\";import CustomTextField from\"../components/CustomTextField\";import CustomChip from\"../components/CustomChip\";import DetailsArea from\"../components/DetailsArea\";import MovieCast from\"./MovieCast\";import{withRouter}from\"react-router-dom\";import MovieService from\"../services/MovieService\";import ReleaseDates from\"./ReleaseDates\";import Ratings from\"./Ratings\";import Synopsis from\"./Synopsis\";var useStyles=makeStyles(function(theme){return{flexCol:{display:\"flex\",flexDirection:\"column\"},flexRow:{display:\"flex\",flexDirection:\"row\"},justifySpaceBetween:{justifyContent:\"space-between\"},flex:{flex:1},flexEnd:{justifyContent:\"flex-end\"},marginSides:{marginLeft:theme.spacing(1),marginRight:theme.spacing(1)},center:{margin:\"auto\"},padding:{padding:theme.spacing(2)},maxWidth:{width:\"100%\",maxWidth:\"1500px\"},pageArea:{paddingBottom:theme.spacing(2),\"&:last-child\":{paddingBottom:0}},title:{marginTop:theme.spacing(4)},barMinHeight:{minHeight:theme.spacing(5),position:\"absolute\",top:theme.spacing(1),right:theme.spacing(2)}};});/**\n * For presenting and changing movie details\n * @param {props} props\n */function MovieDetailsComponent(props){var classes=useStyles();var _React$useState=React.useState(\" \"),_React$useState2=_slicedToArray(_React$useState,2),movieTitle=_React$useState2[0],setMovieTitle=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),movieSynopsis=_React$useState4[0],setMovieSynopsis=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),movieCast=_React$useState6[0],setMovieCast=_React$useState6[1];var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),movieAgeRating=_React$useState8[0],setMovieAgeRating=_React$useState8[1];var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),movieRuntime=_React$useState10[0],setMovieRuntime=_React$useState10[1];var _React$useState11=React.useState(\"\"),_React$useState12=_slicedToArray(_React$useState11,2),movieYear=_React$useState12[0],setMovieYear=_React$useState12[1];var _React$useState13=React.useState(\"\"),_React$useState14=_slicedToArray(_React$useState13,2),criticsRating=_React$useState14[0],setCriticsRating=_React$useState14[1];var _React$useState15=React.useState(\"\"),_React$useState16=_slicedToArray(_React$useState15,2),avgAudienceRating=_React$useState16[0],setAvgAudienceRating=_React$useState16[1];var _React$useState17=React.useState(\"\"),_React$useState18=_slicedToArray(_React$useState17,2),theaterRelease=_React$useState18[0],setTheaterRelease=_React$useState18[1];var _React$useState19=React.useState(\"\"),_React$useState20=_slicedToArray(_React$useState19,2),blurayRelase=_React$useState20[0],setBlurayRelease=_React$useState20[1];var _React$useState21=React.useState(\"\"),_React$useState22=_slicedToArray(_React$useState21,2),moviethumbnail=_React$useState22[0],setMovieThumbnail=_React$useState22[1];// for extracting the attributes of the given movie to the approriate state variables\nvar extractMovie=function extractMovie(){if(!props.movie){return;}setMovieTitle(props.movie.title);setMovieSynopsis(props.movie.synopsis);setMovieAgeRating(props.movie.mpaa_rating);setMovieRuntime(props.movie.runtime);setMovieCast(JSON.parse(JSON.stringify(props.movie.actors)));setCriticsRating(props.movie.criticsRating);setAvgAudienceRating(props.movie.avgAudienceRating);setTheaterRelease(props.movie.theaterRelease);setBlurayRelease(props.movie.blurayRelease);setMovieYear(props.movie.year);setMovieThumbnail(props.movie.thumbnail);};// creating a object with all relevant data to update or create a changed movie\nvar packMovie=function packMovie(){var back=_objectSpread({},props.movie);back.title=movieTitle;back.synopsis=movieSynopsis;back.runtime=movieRuntime;back.mpaa_rating=movieAgeRating;back.theaterRelease=theaterRelease;back.blurayRelease=blurayRelase;back.criticsRating=criticsRating;back.actors=movieCast;back.thumbnail=moviethumbnail;return back;};// triggers when a new movie is given to this component or the new parameter is changed\nuseEffect(function(){if(!props.new){extractMovie();}},[props.movie,props.new]);// triggers when the new parameter is changed and setts the edit mode to true\nuseEffect(function(){if(props.new){setEditMode(true);}},[props.new]);// indicates whether the movie can be changed\nvar _React$useState23=React.useState(null),_React$useState24=_slicedToArray(_React$useState23,2),editMode=_React$useState24[0],setEditMode=_React$useState24[1];// props for all grid items used below in the JSX\nvar girdItemProps={item:true,className:classes.padding};// ----------------------------------------------------------------------------------------------------\n// on change functions\nvar onChangeTitle=function onChangeTitle(value){setMovieTitle(value);};var onChangeSynopsis=function onChangeSynopsis(value){setMovieSynopsis(value);};var onChangeRuntime=function onChangeRuntime(value){setMovieRuntime(value);};var onChangeAgeRating=function onChangeAgeRating(value){setMovieAgeRating(value);};var onChangeThumbnail=function onChangeThumbnail(value){setMovieThumbnail(value);};var _onChangeOwnRating=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value){var newAvgAudienceRating;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return MovieService.rateMovie(props.movie._id,value);case 2:_context.next=4;return MovieService.getRating(props.movie._id);case 4:newAvgAudienceRating=_context.sent;setAvgAudienceRating(newAvgAudienceRating.rating);case 6:case\"end\":return _context.stop();}}},_callee);}));return function onChangeOwnRating(_x){return _ref.apply(this,arguments);};}();var toggleEditMode=function toggleEditMode(){setEditMode(!editMode);};// ----------------------------------------------------------------------------------------------------\n// for cast\nvar onAddCastMember=function onAddCastMember(castMember){movieCast.push(castMember);setMovieCast(_toConsumableArray(movieCast));};// for cast\nvar onRemoveCastMember=function onRemoveCastMember(index){movieCast.splice(index,1);setMovieCast(_toConsumableArray(movieCast));};// cancel is called, functionality differs whether it is a new movie or not\nvar onCancel=function onCancel(){if(props.new){props.history.push(\"/\");}else{setEditMode(false);extractMovie();}};// save is called, functionality differs whether it is a new movie or not\nvar onSave=function onSave(){if(props.new){props.onCreate(packMovie());}else{setEditMode(false);props.onSave(packMovie());}};return/*#__PURE__*/_jsxs(\"div\",{className:classes.flexCol+\" \"+classes.padding+\" \"+classes.center+\" \"+classes.flex+\" \"+classes.maxWidth,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.flexRow+\" \"+classes.flexEnd+\" \"+classes.barMinHeight,children:props.isAdmin?editMode?/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:onCancel,variant:\"contained\",color:\"primary\",className:classes.marginSides,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:onSave,variant:\"contained\",color:\"primary\",className:classes.marginSides,disabled:props.new&&movieTitle===\"\",children:props.new?\"Create\":\"Save\"})]}):/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){return setEditMode(true);},variant:\"contained\",color:\"primary\",className:classes.marginSides,disabled:!props.isLoggedIn,children:\"Edit\"}):null}),/*#__PURE__*/_jsx(\"div\",{className:classes.pageArea+\" \"+classes.title,children:/*#__PURE__*/_jsx(CustomTextField,{value:movieTitle,editMode:editMode,furtherProps:{fullWidth:true},align:\"center\",variant:\"h2\",onChange:onChangeTitle})}),/*#__PURE__*/_jsxs(Grid,{container:true,justify:\"center\",className:classes.pageArea,children:[/*#__PURE__*/_jsx(Grid,_objectSpread(_objectSpread({},girdItemProps),{},{children:/*#__PURE__*/_jsx(CustomChip,{content:movieRuntime,caption:\"Runtime\",suffix:\"Minutes\",editMode:editMode,onChange:onChangeRuntime})})),/*#__PURE__*/_jsx(Grid,_objectSpread(_objectSpread({},girdItemProps),{},{children:/*#__PURE__*/_jsx(CustomChip,{content:movieYear===-1?\"No Release Year\":movieYear,caption:\"Year\",editMode:false})})),/*#__PURE__*/_jsx(Grid,_objectSpread(_objectSpread({},girdItemProps),{},{children:/*#__PURE__*/_jsx(CustomChip,{content:movieAgeRating,caption:\"MPAA\",editMode:editMode,onChange:onChangeAgeRating})}))]}),/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,_objectSpread(_objectSpread({xl:6,lg:6,md:6,ms:12,xs:12},girdItemProps),{},{children:/*#__PURE__*/_jsx(DetailsArea,{title:\"Ratings\",content:/*#__PURE__*/_jsx(Ratings,{criticsRating:typeof criticsRating===\"number\"?criticsRating:0,avgAudienceRating:typeof avgAudienceRating===\"number\"?avgAudienceRating:0,editMode:editMode,onChangeCriticsRating:function onChangeCriticsRating(value){return setCriticsRating(value);},onChangeOwnRating:function onChangeOwnRating(value){return _onChangeOwnRating(value);},isAdmin:props.isAdmin})})})),/*#__PURE__*/_jsx(Grid,_objectSpread(_objectSpread({xl:6,lg:6,md:6,ms:12,xs:12},girdItemProps),{},{children:/*#__PURE__*/_jsx(DetailsArea,{title:\"Release Dates\",content:/*#__PURE__*/_jsx(ReleaseDates,{theaterRelease:theaterRelease,blurayRelase:blurayRelase,editMode:editMode,onChangeTheaterRelease:function onChangeTheaterRelease(value){return setTheaterRelease(value);},onChangeBlurayRelease:function onChangeBlurayRelease(value){return setBlurayRelease(value);}})})})),/*#__PURE__*/_jsx(Grid,_objectSpread(_objectSpread({xl:6,lg:6,md:6,ms:12,xs:12},girdItemProps),{},{children:/*#__PURE__*/_jsx(DetailsArea,{title:\"Synopsis\",content:/*#__PURE__*/_jsx(Synopsis,{editMode:editMode,movieSynopsis:movieSynopsis,moviethumbnail:moviethumbnail,onChangeThumbnail:onChangeThumbnail,onChangeSynopsis:onChangeSynopsis})})})),/*#__PURE__*/_jsx(Grid,_objectSpread(_objectSpread({xl:6,lg:6,md:6,ms:12,xs:12},girdItemProps),{},{children:/*#__PURE__*/_jsx(DetailsArea,{title:\"Starring\",content:/*#__PURE__*/_jsx(MovieCast,{movieCast:movieCast,editMode:editMode,toggleEditMode:toggleEditMode,onAddCastMember:onAddCastMember,onRemoveCastMember:onRemoveCastMember,isLoggedIn:props.isLoggedIn,isAdmin:props.isAdmin})})}))]})]});}// attributes of props and their type\n// withRouter() allows accsing the necessary functionality to navigate from this component\nexport default withRouter(MovieDetailsComponent);","map":{"version":3,"sources":["/Users/dilrubareyyan/Documents/Files/School/SEBA/laundrywise/frontend/src/components/MovieDetailsComponent.js"],"names":["React","useEffect","makeStyles","Button","Grid","CustomTextField","CustomChip","DetailsArea","MovieCast","withRouter","MovieService","ReleaseDates","Ratings","Synopsis","useStyles","theme","flexCol","display","flexDirection","flexRow","justifySpaceBetween","justifyContent","flex","flexEnd","marginSides","marginLeft","spacing","marginRight","center","margin","padding","maxWidth","width","pageArea","paddingBottom","title","marginTop","barMinHeight","minHeight","position","top","right","MovieDetailsComponent","props","classes","useState","movieTitle","setMovieTitle","movieSynopsis","setMovieSynopsis","movieCast","setMovieCast","movieAgeRating","setMovieAgeRating","movieRuntime","setMovieRuntime","movieYear","setMovieYear","criticsRating","setCriticsRating","avgAudienceRating","setAvgAudienceRating","theaterRelease","setTheaterRelease","blurayRelase","setBlurayRelease","moviethumbnail","setMovieThumbnail","extractMovie","movie","synopsis","mpaa_rating","runtime","JSON","parse","stringify","actors","blurayRelease","year","thumbnail","packMovie","back","new","setEditMode","editMode","girdItemProps","item","className","onChangeTitle","value","onChangeSynopsis","onChangeRuntime","onChangeAgeRating","onChangeThumbnail","onChangeOwnRating","rateMovie","_id","getRating","newAvgAudienceRating","rating","toggleEditMode","onAddCastMember","castMember","push","onRemoveCastMember","index","splice","onCancel","history","onSave","onCreate","isAdmin","e","isLoggedIn","fullWidth"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Button, Grid } from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport CustomTextField from \"../components/CustomTextField\";\nimport CustomChip from \"../components/CustomChip\";\nimport DetailsArea from \"../components/DetailsArea\";\nimport MovieCast from \"./MovieCast\";\nimport { withRouter } from \"react-router-dom\";\nimport MovieService from \"../services/MovieService\";\nimport ReleaseDates from \"./ReleaseDates\";\nimport Ratings from \"./Ratings\";\nimport Synopsis from \"./Synopsis\";\n\nconst useStyles = makeStyles((theme) => ({\n    flexCol: {\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    flexRow: {\n        display: \"flex\",\n        flexDirection: \"row\",\n    },\n    justifySpaceBetween: {\n        justifyContent: \"space-between\",\n    },\n    flex: {\n        flex: 1,\n    },\n    flexEnd: {\n        justifyContent: \"flex-end\",\n    },\n    marginSides: {\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n    },\n    center: {\n        margin: \"auto\",\n    },\n    padding: {\n        padding: theme.spacing(2),\n    },\n    maxWidth: {\n        width: \"100%\",\n        maxWidth: \"1500px\",\n    },\n    pageArea: {\n        paddingBottom: theme.spacing(2),\n        \"&:last-child\": {\n            paddingBottom: 0,\n        },\n    },\n    title: {\n        marginTop: theme.spacing(4),\n    },\n    barMinHeight: {\n        minHeight: theme.spacing(5),\n        position: \"absolute\",\n        top: theme.spacing(1),\n        right: theme.spacing(2),\n    },\n}));\n\n/**\n * For presenting and changing movie details\n * @param {props} props\n */\nfunction MovieDetailsComponent(props) {\n    const classes = useStyles();\n\n    const [movieTitle, setMovieTitle] = React.useState(\" \");\n    const [movieSynopsis, setMovieSynopsis] = React.useState(\"\");\n    const [movieCast, setMovieCast] = React.useState([]);\n    const [movieAgeRating, setMovieAgeRating] = React.useState(\"\");\n    const [movieRuntime, setMovieRuntime] = React.useState(\"\");\n    const [movieYear, setMovieYear] = React.useState(\"\");\n    const [criticsRating, setCriticsRating] = React.useState(\"\");\n    const [avgAudienceRating, setAvgAudienceRating] = React.useState(\"\");\n    const [theaterRelease, setTheaterRelease] = React.useState(\"\");\n    const [blurayRelase, setBlurayRelease] = React.useState(\"\");\n    const [moviethumbnail, setMovieThumbnail] = React.useState(\"\");\n\n    // for extracting the attributes of the given movie to the approriate state variables\n    const extractMovie = () => {\n        if (!props.movie) {\n            return;\n        }\n\n        setMovieTitle(props.movie.title);\n        setMovieSynopsis(props.movie.synopsis);\n        setMovieAgeRating(props.movie.mpaa_rating);\n        setMovieRuntime(props.movie.runtime);\n\n        setMovieCast(JSON.parse(JSON.stringify(props.movie.actors)));\n        setCriticsRating(props.movie.criticsRating);\n        setAvgAudienceRating(props.movie.avgAudienceRating);\n        setTheaterRelease(props.movie.theaterRelease);\n        setBlurayRelease(props.movie.blurayRelease);\n        setMovieYear(props.movie.year);\n        setMovieThumbnail(props.movie.thumbnail);\n    };\n\n    // creating a object with all relevant data to update or create a changed movie\n    const packMovie = () => {\n        let back = {\n            ...props.movie,\n        };\n\n        back.title = movieTitle;\n        back.synopsis = movieSynopsis;\n        back.runtime = movieRuntime;\n        back.mpaa_rating = movieAgeRating;\n\n        back.theaterRelease = theaterRelease;\n        back.blurayRelease = blurayRelase;\n        back.criticsRating = criticsRating;\n        back.actors = movieCast;\n        back.thumbnail = moviethumbnail;\n\n        return back;\n    };\n\n    // triggers when a new movie is given to this component or the new parameter is changed\n    useEffect(() => {\n        if (!props.new) {\n            extractMovie();\n        }\n    }, [props.movie, props.new]);\n\n    // triggers when the new parameter is changed and setts the edit mode to true\n    useEffect(() => {\n        if (props.new) {\n            setEditMode(true);\n        }\n    }, [props.new]);\n\n    // indicates whether the movie can be changed\n    const [editMode, setEditMode] = React.useState(null);\n\n    // props for all grid items used below in the JSX\n    const girdItemProps = {\n        item: true,\n        className: classes.padding,\n    };\n\n    // ----------------------------------------------------------------------------------------------------\n    // on change functions\n\n    const onChangeTitle = (value) => {\n        setMovieTitle(value);\n    };\n\n    const onChangeSynopsis = (value) => {\n        setMovieSynopsis(value);\n    };\n\n    const onChangeRuntime = (value) => {\n        setMovieRuntime(value);\n    };\n\n    const onChangeAgeRating = (value) => {\n        setMovieAgeRating(value);\n    };\n\n    const onChangeThumbnail = (value) => {\n        setMovieThumbnail(value);\n    };\n\n    const onChangeOwnRating = async (value) => {\n        await MovieService.rateMovie(props.movie._id, value);\n        let newAvgAudienceRating = await MovieService.getRating(\n            props.movie._id\n        );\n        setAvgAudienceRating(newAvgAudienceRating.rating);\n    };\n\n    const toggleEditMode = () => {\n        setEditMode(!editMode);\n    };\n    // ----------------------------------------------------------------------------------------------------\n\n    // for cast\n    const onAddCastMember = (castMember) => {\n        movieCast.push(castMember);\n        setMovieCast([...movieCast]);\n    };\n\n    // for cast\n    const onRemoveCastMember = (index) => {\n        movieCast.splice(index, 1);\n        setMovieCast([...movieCast]);\n    };\n\n    // cancel is called, functionality differs whether it is a new movie or not\n    const onCancel = () => {\n        if (props.new) {\n            props.history.push(\"/\");\n        } else {\n            setEditMode(false);\n            extractMovie();\n        }\n    };\n\n    // save is called, functionality differs whether it is a new movie or not\n    const onSave = () => {\n        if (props.new) {\n            props.onCreate(packMovie());\n        } else {\n            setEditMode(false);\n            props.onSave(packMovie());\n        }\n    };\n\n    return (\n        <div\n            className={\n                classes.flexCol +\n                \" \" +\n                classes.padding +\n                \" \" +\n                classes.center +\n                \" \" +\n                classes.flex +\n                \" \" +\n                classes.maxWidth\n            }\n        >\n            {/* Admin Buttons */}\n            <div\n                className={\n                    classes.flexRow +\n                    \" \" +\n                    classes.flexEnd +\n                    \" \" +\n                    classes.barMinHeight\n                }\n            >\n                {/* Checks if the current user is admin. Only an admin can alter movies */}\n                {props.isAdmin ? (\n                    editMode ? (\n                        <React.Fragment>\n                            <Button\n                                onClick={onCancel}\n                                variant=\"contained\"\n                                color=\"primary\"\n                                className={classes.marginSides}\n                            >\n                                Cancel\n                            </Button>\n                            <Button\n                                onClick={onSave}\n                                variant=\"contained\"\n                                color=\"primary\"\n                                className={classes.marginSides}\n                                disabled={props.new && movieTitle === \"\"}\n                            >\n                                {props.new ? \"Create\" : \"Save\"}\n                            </Button>\n                        </React.Fragment>\n                    ) : (\n                        <Button\n                            onClick={(e) => setEditMode(true)}\n                            variant=\"contained\"\n                            color=\"primary\"\n                            className={classes.marginSides}\n                            disabled={!props.isLoggedIn}\n                        >\n                            Edit\n                        </Button>\n                    )\n                ) : null}\n            </div>\n\n            {/* Movie Title */}\n            <div className={classes.pageArea + \" \" + classes.title}>\n                <CustomTextField\n                    value={movieTitle}\n                    editMode={editMode}\n                    furtherProps={{\n                        fullWidth: true,\n                    }}\n                    align=\"center\"\n                    variant=\"h2\"\n                    onChange={onChangeTitle}\n                />\n            </div>\n\n            {/* Runtime, Year and MPAA as Chips */}\n            <Grid container justify=\"center\" className={classes.pageArea}>\n                <Grid {...girdItemProps}>\n                    <CustomChip\n                        content={movieRuntime}\n                        caption=\"Runtime\"\n                        suffix=\"Minutes\"\n                        editMode={editMode}\n                        onChange={onChangeRuntime}\n                    />\n                </Grid>\n                <Grid {...girdItemProps}>\n                    <CustomChip\n                        content={\n                            movieYear === -1 ? \"No Release Year\" : movieYear\n                        }\n                        caption=\"Year\"\n                        editMode={false}\n                    />\n                </Grid>\n                <Grid {...girdItemProps}>\n                    <CustomChip\n                        content={movieAgeRating}\n                        caption=\"MPAA\"\n                        editMode={editMode}\n                        onChange={onChangeAgeRating}\n                    />\n                </Grid>\n            </Grid>\n\n            {/* More detail data of the movie, grouped in DetailsArea.js for a consistent look */}\n            <Grid container>\n                {/* Ratings */}\n                <Grid xl={6} lg={6} md={6} ms={12} xs={12} {...girdItemProps}>\n                    <DetailsArea\n                        title=\"Ratings\"\n                        content={\n                            <Ratings\n                                criticsRating={\n                                    typeof criticsRating === \"number\"\n                                        ? criticsRating\n                                        : 0\n                                }\n                                avgAudienceRating={\n                                    typeof avgAudienceRating === \"number\"\n                                        ? avgAudienceRating\n                                        : 0\n                                }\n                                editMode={editMode}\n                                onChangeCriticsRating={(value) =>\n                                    setCriticsRating(value)\n                                }\n                                onChangeOwnRating={(value) =>\n                                    onChangeOwnRating(value)\n                                }\n                                isAdmin={props.isAdmin}\n                            />\n                        }\n                    />\n                </Grid>\n\n                {/* Release Dates */}\n                <Grid xl={6} lg={6} md={6} ms={12} xs={12} {...girdItemProps}>\n                    <DetailsArea\n                        title=\"Release Dates\"\n                        content={\n                            <ReleaseDates\n                                theaterRelease={theaterRelease}\n                                blurayRelase={blurayRelase}\n                                editMode={editMode}\n                                onChangeTheaterRelease={(value) =>\n                                    setTheaterRelease(value)\n                                }\n                                onChangeBlurayRelease={(value) =>\n                                    setBlurayRelease(value)\n                                }\n                            />\n                        }\n                    />\n                </Grid>\n\n                {/* Synopsis */}\n                <Grid xl={6} lg={6} md={6} ms={12} xs={12} {...girdItemProps}>\n                    <DetailsArea\n                        title=\"Synopsis\"\n                        content={\n                            <Synopsis\n                                editMode={editMode}\n                                movieSynopsis={movieSynopsis}\n                                moviethumbnail={moviethumbnail}\n                                onChangeThumbnail={onChangeThumbnail}\n                                onChangeSynopsis={onChangeSynopsis}\n                            />\n                        }\n                    />\n                </Grid>\n\n                {/* Cast */}\n                <Grid xl={6} lg={6} md={6} ms={12} xs={12} {...girdItemProps}>\n                    <DetailsArea\n                        title=\"Starring\"\n                        content={\n                            <MovieCast\n                                movieCast={movieCast}\n                                editMode={editMode}\n                                toggleEditMode={toggleEditMode}\n                                onAddCastMember={onAddCastMember}\n                                onRemoveCastMember={onRemoveCastMember}\n                                isLoggedIn={props.isLoggedIn}\n                                isAdmin={props.isAdmin}\n                            />\n                        }\n                    />\n                </Grid>\n            </Grid>\n        </div>\n    );\n}\n\n// attributes of props and their type\nMovieDetailsComponent.propTypes = {\n    movie: PropTypes.object,\n    new: PropTypes.bool,\n    onCreate: PropTypes.func,\n    onSave: PropTypes.func,\n};\n\n// withRouter() allows accsing the necessary functionality to navigate from this component\nexport default withRouter(MovieDetailsComponent);\n"]},"metadata":{},"sourceType":"module"}