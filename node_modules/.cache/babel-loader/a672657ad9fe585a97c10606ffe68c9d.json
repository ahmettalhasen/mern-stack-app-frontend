{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dilrubareyyan/Documents/Files/School/SEBA/laundrywise/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dilrubareyyan/Documents/Files/School/SEBA/laundrywise/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect}from\"react\";import{connect,useSelector}from\"react-redux\";import{getMovies,deleteMovie}from\"../redux/actions\";import MovieListComponent from\"../components/MovieListComponent\";import Loading from\"../components/Loading\";/**\n * Manages the process of getting movie list data\n * @param {props} props\n */function MovieListView(props){// state from the redux store\nvar movies=useSelector(function(state){return state.entities.movies;});var user=useSelector(function(state){return state.user;});useEffect(function(){// load movies when the page is loaded or the movies have changed.\nif(!movies){loadMovies();}},[movies]);var loadMovies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// trigger the redux action getMovies\nprops.dispatch(getMovies());case 1:case\"end\":return _context.stop();}}},_callee);}));return function loadMovies(){return _ref.apply(this,arguments);};}();var onClickDeleteMovie=function onClickDeleteMovie(id){// trigger the redux action delete Movies\nprops.dispatch(deleteMovie(id));};var onClickDisplayMovie=function onClickDisplayMovie(id){// navigate to details of the selected movie\nprops.history.push(\"/movie/\"+id);};var onAddMovie=function onAddMovie(){// navigate to an empty mask for entering details of the new movie\nprops.history.push(\"/movie/new\");};return!movies?/*#__PURE__*/ // if no movies are loaded, the above useEffect should be triggered\n_jsx(Loading,{}):!Array.isArray(movies)?/*#__PURE__*/ // apperantly something went wrong, usually there should be some kind of error handling\n_jsx(\"div\",{children:\"error\"}):/*#__PURE__*/ // everyhing is fine an the movie list can be displayed\n_jsx(MovieListComponent,{movies:movies,onClickDisplayMovie:onClickDisplayMovie,onClickDeleteMovie:onClickDeleteMovie,onAddMovie:onAddMovie,isLoggedIn:!!user.user,isAdmin:!!user.user?user.user.role===\"admin\":false});}// connect() establishes the connection to the redux functionalities\nexport default connect()(MovieListView);","map":{"version":3,"sources":["/Users/dilrubareyyan/Documents/Files/School/SEBA/laundrywise/frontend/src/views/MovieListView.js"],"names":["React","useEffect","connect","useSelector","getMovies","deleteMovie","MovieListComponent","Loading","MovieListView","props","movies","state","entities","user","loadMovies","dispatch","onClickDeleteMovie","id","onClickDisplayMovie","history","push","onAddMovie","Array","isArray","role"],"mappings":"gaAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,CAAkBC,WAAlB,KAAqC,aAArC,CAEA,OAASC,SAAT,CAAoBC,WAApB,KAAuC,kBAAvC,CACA,MAAOC,CAAAA,kBAAP,KAA+B,kCAA/B,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CAEA;AACA;AACA;AACA,GACA,QAASC,CAAAA,aAAT,CAAuBC,KAAvB,CAA8B,CAC1B;AACA,GAAMC,CAAAA,MAAM,CAAGP,WAAW,CAAC,SAACQ,KAAD,QAAWA,CAAAA,KAAK,CAACC,QAAN,CAAeF,MAA1B,EAAD,CAA1B,CACA,GAAMG,CAAAA,IAAI,CAAGV,WAAW,CAAC,SAACQ,KAAD,QAAWA,CAAAA,KAAK,CAACE,IAAjB,EAAD,CAAxB,CAEAZ,SAAS,CAAC,UAAM,CACZ;AACA,GAAI,CAACS,MAAL,CAAa,CACTI,UAAU,GACb,CACJ,CALQ,CAKN,CAACJ,MAAD,CALM,CAAT,CAOA,GAAMI,CAAAA,UAAU,0FAAG,mIACf;AACAL,KAAK,CAACM,QAAN,CAAeX,SAAS,EAAxB,EAFe,sDAAH,kBAAVU,CAAAA,UAAU,0CAAhB,CAKA,GAAME,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,EAAD,CAAQ,CAC/B;AACAR,KAAK,CAACM,QAAN,CAAeV,WAAW,CAACY,EAAD,CAA1B,EACH,CAHD,CAKA,GAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACD,EAAD,CAAQ,CAChC;AACAR,KAAK,CAACU,OAAN,CAAcC,IAAd,CAAmB,UAAYH,EAA/B,EACH,CAHD,CAKA,GAAMI,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrB;AACAZ,KAAK,CAACU,OAAN,CAAcC,IAAd,CAAmB,YAAnB,EACH,CAHD,CAKA,MAAO,CAACV,MAAD,eACH;AACA,KAAC,OAAD,IAFG,CAGH,CAACY,KAAK,CAACC,OAAN,CAAcb,MAAd,CAAD,eACA;AACA,8BAFA,eAIA;AACA,KAAC,kBAAD,EACI,MAAM,CAAEA,MADZ,CAEI,mBAAmB,CAAEQ,mBAFzB,CAGI,kBAAkB,CAAEF,kBAHxB,CAII,UAAU,CAAEK,UAJhB,CAKI,UAAU,CAAE,CAAC,CAACR,IAAI,CAACA,IALvB,CAMI,OAAO,CAAE,CAAC,CAACA,IAAI,CAACA,IAAP,CAAcA,IAAI,CAACA,IAAL,CAAUW,IAAV,GAAmB,OAAjC,CAA2C,KANxD,EARJ,CAiBH,CAED;AACA,cAAetB,CAAAA,OAAO,GAAGM,aAAH,CAAtB","sourcesContent":["import React, { useEffect } from \"react\";\nimport { connect, useSelector } from \"react-redux\";\n\nimport { getMovies, deleteMovie } from \"../redux/actions\";\nimport MovieListComponent from \"../components/MovieListComponent\";\nimport Loading from \"../components/Loading\";\n\n/**\n * Manages the process of getting movie list data\n * @param {props} props\n */\nfunction MovieListView(props) {\n    // state from the redux store\n    const movies = useSelector((state) => state.entities.movies);\n    const user = useSelector((state) => state.user);\n\n    useEffect(() => {\n        // load movies when the page is loaded or the movies have changed.\n        if (!movies) {\n            loadMovies();\n        }\n    }, [movies]);\n\n    const loadMovies = async () => {\n        // trigger the redux action getMovies\n        props.dispatch(getMovies());\n    };\n\n    const onClickDeleteMovie = (id) => {\n        // trigger the redux action delete Movies\n        props.dispatch(deleteMovie(id));\n    };\n\n    const onClickDisplayMovie = (id) => {\n        // navigate to details of the selected movie\n        props.history.push(\"/movie/\" + id);\n    };\n\n    const onAddMovie = () => {\n        // navigate to an empty mask for entering details of the new movie\n        props.history.push(\"/movie/new\");\n    };\n\n    return !movies ? (\n        // if no movies are loaded, the above useEffect should be triggered\n        <Loading />\n    ) : !Array.isArray(movies) ? (\n        // apperantly something went wrong, usually there should be some kind of error handling\n        <div>error</div>\n    ) : (\n        // everyhing is fine an the movie list can be displayed\n        <MovieListComponent\n            movies={movies}\n            onClickDisplayMovie={onClickDisplayMovie}\n            onClickDeleteMovie={onClickDeleteMovie}\n            onAddMovie={onAddMovie}\n            isLoggedIn={!!user.user}\n            isAdmin={!!user.user ? user.user.role === \"admin\" : false}\n        />\n    );\n}\n\n// connect() establishes the connection to the redux functionalities\nexport default connect()(MovieListView);\n"]},"metadata":{},"sourceType":"module"}