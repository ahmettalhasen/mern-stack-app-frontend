{"ast":null,"code":"var getUser=function getUser(){if(window.localStorage[\"jwtToken\"]){var token=window.localStorage[\"jwtToken\"];var base64Url=token.split(\".\")[1];var base64=base64Url.replace(\"-\",\"+\").replace(\"_\",\"/\");var userJson=JSON.parse(window.atob(base64));// if token is expired delete it and return {}\n// --> User is not logged in anymore.\nif(userJson.exp>Date.now()){window.localStorage.removeItem(\"jwtToken\");return{};}return{user:{_id:userJson._id,username:userJson.username,role:userJson.role}};}return{};};export default function user(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:getUser();var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case\"LOGIN_SUCCESS\":return{user:action.user};case\"LOGIN_FAILURE\":return{error:\"Password or username incorrect.\"};case\"LOGIN_RESET\":return{};case\"LOGOUT\":return{};default:return state;}}","map":{"version":3,"sources":["/Users/dilrubareyyan/Documents/Files/School/SEBA/laundrywise/frontend/src/redux/reducers/userReducer.js"],"names":["getUser","window","localStorage","token","base64Url","split","base64","replace","userJson","JSON","parse","atob","exp","Date","now","removeItem","user","_id","username","role","state","action","type","error"],"mappings":"AAAA,GAAMA,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CAClB,GAAIC,MAAM,CAACC,YAAP,CAAoB,UAApB,CAAJ,CAAqC,CACjC,GAAIC,CAAAA,KAAK,CAAGF,MAAM,CAACC,YAAP,CAAoB,UAApB,CAAZ,CACA,GAAIE,CAAAA,SAAS,CAAGD,KAAK,CAACE,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAhB,CACA,GAAIC,CAAAA,MAAM,CAAGF,SAAS,CAACG,OAAV,CAAkB,GAAlB,CAAuB,GAAvB,EAA4BA,OAA5B,CAAoC,GAApC,CAAyC,GAAzC,CAAb,CACA,GAAIC,CAAAA,QAAQ,CAAGC,IAAI,CAACC,KAAL,CAAWT,MAAM,CAACU,IAAP,CAAYL,MAAZ,CAAX,CAAf,CACA;AACA;AACA,GAAIE,QAAQ,CAACI,GAAT,CAAeC,IAAI,CAACC,GAAL,EAAnB,CAA+B,CAC3Bb,MAAM,CAACC,YAAP,CAAoBa,UAApB,CAA+B,UAA/B,EACA,MAAO,EAAP,CACH,CACD,MAAO,CACHC,IAAI,CAAE,CACFC,GAAG,CAAET,QAAQ,CAACS,GADZ,CAEFC,QAAQ,CAAEV,QAAQ,CAACU,QAFjB,CAGFC,IAAI,CAAEX,QAAQ,CAACW,IAHb,CADH,CAAP,CAOH,CACD,MAAO,EAAP,CACH,CArBD,CAuBA,cAAe,SAASH,CAAAA,IAAT,EAAyC,IAA3BI,CAAAA,KAA2B,2DAAnBpB,OAAO,EAAY,IAARqB,CAAAA,MAAQ,2CACpD,OAAQA,MAAM,CAACC,IAAf,EACI,IAAK,eAAL,CACI,MAAO,CAAEN,IAAI,CAAEK,MAAM,CAACL,IAAf,CAAP,CACJ,IAAK,eAAL,CACI,MAAO,CAAEO,KAAK,CAAE,iCAAT,CAAP,CACJ,IAAK,aAAL,CACI,MAAO,EAAP,CACJ,IAAK,QAAL,CACI,MAAO,EAAP,CACJ,QACI,MAAOH,CAAAA,KAAP,CAVR,CAYH","sourcesContent":["const getUser = () => {\n    if (window.localStorage[\"jwtToken\"]) {\n        let token = window.localStorage[\"jwtToken\"];\n        let base64Url = token.split(\".\")[1];\n        let base64 = base64Url.replace(\"-\", \"+\").replace(\"_\", \"/\");\n        let userJson = JSON.parse(window.atob(base64));\n        // if token is expired delete it and return {}\n        // --> User is not logged in anymore.\n        if (userJson.exp > Date.now()) {\n            window.localStorage.removeItem(\"jwtToken\");\n            return {};\n        }\n        return {\n            user: {\n                _id: userJson._id,\n                username: userJson.username,\n                role: userJson.role,\n            },\n        };\n    }\n    return {};\n};\n\nexport default function user(state = getUser(), action) {\n    switch (action.type) {\n        case \"LOGIN_SUCCESS\":\n            return { user: action.user };\n        case \"LOGIN_FAILURE\":\n            return { error: \"Password or username incorrect.\" };\n        case \"LOGIN_RESET\":\n            return {};\n        case \"LOGOUT\":\n            return {};\n        default:\n            return state;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}